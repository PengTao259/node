### js执行队列

![img](https://pic3.zhimg.com/80/v2-eba59eaab15f8a27c1b58f69513f0c0e_720w.jpg)

因为**js**引擎是单线程，当任务进入任务栈的时候，先分析是同步任务还是异步任务，如果是同步任务则进入主线程进行执行，这个时候**js**引擎中的**monitoring process**进程会不断检查主线程的执行情况，当指定的事情执行完，就会把Event Table中的函数移入Event Queue。如果主线程中一旦为空，则会去Event Queue中读取对应的函数，进入到主线程中执行。上述这个过程会不断的执行，被称为Event Loop（事件循环）。

____



### 宏任务与微任务

宏任务和微任务同属异步任务，首先，当任务进入到任务队列后，先执行队列中的同步任务，然后进入异步任务队列。js引擎检查有没有存在宏任务，如果有，先把宏任务挂起，执行微任务，如：process.nextTick()，promise等。微任务执行完毕后开始执行宏任务，这个时候如果宏任务中包含有多种任务如同步任务，微任务等，则先按照正常的执行顺序，把内部代码执行完毕再跳出宏任务，执行其他的宏任务代码。

***



